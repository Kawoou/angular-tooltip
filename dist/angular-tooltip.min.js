!function(t,e){"use strict";function i(){return e.innerHeight||document.documentElement.clientHeight}var n={LEFT:1,RIGHT:2,TOP:3,BOTTOM:4},o=[];t.module("kw.tooltip",[]).directive("tooltip",["$q","$document","$compile","$sce","$timeout","$templateRequest",function(e,l,a,u,s,r){function p(t,e,o,l){var a,u,s=i();switch(t){case n.LEFT:a=o.left-e,u=o.top;break;case n.RIGHT:a=o.right+e,u=o.top;break;case n.BOTTOM:a=o.left,u=o.bottom+e;break;default:a=o.left,u=o.top-e}if(l)switch(t){case n.LEFT:a-=l.width,u-=(l.height-o.height)/2,e>a&&(a=o.right+e),e>u&&(u=e),u+l.height<s||(u-=u+l.height+e-s);break;case n.RIGHT:u-=(l.height-o.height)/2,a+l.width<s||(a=o.left-l.width-e),e>u&&(u=e),u+l.height<s||(u-=u+l.height+e-s);break;case n.BOTTOM:a-=(l.width-o.width)/2,e>a&&(a=e),a+l.width<s||(a+=s-a-l.width-e),u+l.height<s||(u=o.top-l.height-e);break;default:a-=(l.width-o.width)/2,u-=l.height,e>a&&(a=e),a+l.width<s||(a+=s-a-l.width-e),e>u&&(u=o.bottom+e)}return{x:a,y:u}}return{restrict:"EA",scope:{tooltipText:"@ttText"},link:function(i,d,c){function h(t){if(i){var e=i.$$phase||l.scope().$$phase;"$apply"===e||"$digest"===e?t&&i.$eval(t):t?i.$apply(t):i.$apply()}}function f(t,e){return t?i.$eval(t)||i.$parent.$eval(t)||e:e}function m(){if(!v&&$&&w){o.forEach(function(t){t&&t()}),o=[],o.push(g);var e=d[0].getBoundingClientRect();if(H=t.element(w)){t.element(document.body).append(H),i.options=x,i.model=f(c.ttScopeModel),a(H)(i),h();var n=p(b,x.padding,e,H[0].getBoundingClientRect());H[0].style.left=""+n.x+"px",H[0].style.top=""+n.y+"px",s(function(){try{if(!H)return;var t="all "+(x.animationTime/1e3).toFixed(2)+"s";H[0].style.transition=t,H[0].style["-o-transition"]=t,H[0].style["-ms-transition"]=t,H[0].style["-moz-transition"]=t,H[0].style["-webkit-transition"]=t,H[0].style.opacity=1,H[0].style["z-index"]=x.zIndex,n=p(b,x.padding,e,H[0].getBoundingClientRect()),H[0].style.left=""+n.x+"px",H[0].style.top=""+n.y+"px"}catch(i){console.error("Not found Tooltip element!"),console.error(i)}})}else console.error("Failed to create Tooltip element!")}}function g(){if(H){var t=H;H=null,t&&(t[0].style.opacity=0,setTimeout(function(){t.remove(),t=null},x.animationTime))}}function T(t){return e(function(e,i){return t?void r(t).then(function(t){w='<div style="opacity:0;position:fixed">'+t+"</div>",e()},function(){i()}):(w='<div style="opacity:0;position:fixed"><div style="border:1px solid #e0e7e8;background:white;padding:6px 6px;margin:0;">'+(x.useHTML?'<p style="padding:0;margin:0;font-size:14px;line-height:14px;" ng-bind-html="trustHtml(tooltipText)"></p>':'<p style="padding:0;margin:0;font-size:14px;line-height:14px;">{{ tooltipText }}</p>')+"</div></div>",void e())})}function y(){c.tooltip&&c.tooltip.length>0?T(c.tooltip).then(function(){m()},function(){T(null).finally(m)}):T(null).finally(m)}var x={waitTime:250,animationTime:250,padding:5,useHTML:!1,zIndex:1e3},$=!1,v=null,w=null,b=n[(c.ttType||"TOP").toUpperCase()],H=null;i.dismiss=g,i.trustHtml=function(t){return u.trustAsHtml(t)},d.$on("mouseover",function(){H&&(v||f(c.ttDisable,!1)||($=!0,v=setTimeout(function(){v=null,m()},x.waitTime)))}),d.$on("mouseout",function(){$=!1,v&&(clearTimeout(v),v=null),g()}),c.ttOptions?i.$on(c.ttOptions,function(){t.merge(x,f(c.ttOptions),{waitTime:250,animationTime:250,padding:5,useHTML:!1,zIndex:1e3}),y()}):y(),c.ttScopeModel&&i.$on(c.ttScopeModel,function(){y()}),i.$on("$destroy",function(){v&&(clearTimeout(v),v=null),g()})}}}])}(angular,window);